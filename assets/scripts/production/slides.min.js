function Slider(e){this.el=document.querySelector(e),this.slides=this.el.querySelectorAll(".slide"),this.arrows=document.querySelectorAll(".arrows svg"),this.w=window,this.baseURL=this.w.location.protocol+"//"+this.w.location.host+this.w.location.pathname,this.init()}function getParameterByName(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),s=t.exec(location.search);return null===s?"":decodeURIComponent(s[1].replace(/\+/g," "))}function slidesInit(){var e=window.innerHeight,t=document.querySelector(".slideshow");slideshowHeight=0,offsetTop=0,slideOffsets=[0],slides=t.querySelectorAll(".slide");for(var s=0;s<slides.length;s++){var i=slides[s],a=i.querySelector(".content"),o=a.offsetHeight;e>o?(i.style.height=e+"px",slideshowHeight+=e,offsetTop+=e,slideOffsets.push(offsetTop),i.setAttribute("data-top",slideOffsets[s]),i.setAttribute("data-bottom",slideOffsets[s]+e),i.setAttribute("data-scroll","0")):(i.style.height=o+"px",slideshowHeight+=o,offsetTop+=o,slideOffsets.push(offsetTop),i.setAttribute("data-top",slideOffsets[s]),i.setAttribute("data-bottom",slideOffsets[s]+o),i.setAttribute("data-scroll","1"))}t.style.height=slideshowHeight+"px"}Slider.prototype={init:function(){for(var e=0;e<slides.length;e++);this.getSlide(e)},getSlide:function(e){var t=getParameterByName("slide");if(""!==t)if(e>=t){var s=document.querySelector('.slide[data-count="'+t+'"]'),i=s.getAttribute("data-top");this.el.style.top="-"+i+"px",this.changeClasses(t,s)}else alert("too far!"),this.el.style.top="0px",this.w.history.replaceState({},"",this.baseURL+"?slide=1"),t=1;else this.w.history.replaceState({},"",this.baseURL+"?slide=1"),t=1;this.slide(e),this.arrowz(e)},changeClasses:function(e,t){for(var s=0;s<this.slides.length;s++)this.slides[s].classList.remove("active");for(var i=0;i<this.arrows.length;i++)this.arrows[i].classList.remove("active");{var a=(document.querySelector("svg.up"),document.querySelector("svg.down"),document.querySelector("svg.left")),o=document.querySelector("svg.right");t.getAttribute("data-scroll")}t.classList.add("active"),1==e?o.classList.add("active"):e>1&&s>e?(a.classList.add("active"),o.classList.add("active")):e==s&&a.classList.add("active")},slide:function(e){var t,s,i,a=this;document.onkeydown=function(o){39==o.keyCode||39==o.which?(t=getParameterByName("slide"),s=document.querySelector('.slide[data-count="'+t+'"]'),i=parseInt(t)+1,i>0&&e>=i&&a.animate(i)):(37==o.keyCode||37==o.which)&&(t=getParameterByName("slide"),s=document.querySelector('.slide[data-count="'+t+'"]'),i=parseInt(t)-1,i>0&&e>=i&&a.animate(i))}},arrowz:function(e){for(var t=0;t<this.arrows.length;t++){var s=this,i=this.arrows[t];s.clicky(i,e)}},clicky:function(e,t){var s=this;e.addEventListener("click",function(){var e=this,i=e.getAttribute("data-dir");"r"==i?(slide=getParameterByName("slide"),currSlide=document.querySelector('.slide[data-count="'+slide+'"]'),next=parseInt(slide)+1,next>0&&next<=t&&s.animate(next)):"l"==i&&(slide=getParameterByName("slide"),currSlide=document.querySelector('.slide[data-count="'+slide+'"]'),next=parseInt(slide)-1,next>0&&next<=t&&s.animate(next))})},animate:function(e){var t=document.querySelector('.slide[data-count="'+e+'"]'),s=t.getAttribute("data-top");this.el.style.top="-"+s+"px",this.w.history.replaceState({},"",this.baseURL+"?slide="+e),this.changeClasses(e,t)}},document.addEventListener("DOMContentLoaded",function(){new Slider(".slideshow")}),slidesInit(),window.addEventListener("scroll",function(){var e=document.querySelector(".slideshow"),t=e.querySelector(".active"),s=parseInt(e.style.top),i=parseInt(t.getAttribute("data-bottom"))+s-parseInt(window.innerHeight);window.pageYOffset>=i&&window.scrollTo(0,i)}),window.addEventListener("resize",function(){slidesInit()});
function Slider(t){this.el=document.querySelector(t),this.init()}function getParameterByName(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),o=e.exec(location.search);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))}Slider.prototype={init:function(){var t=window,e=window.innerHeight,o=0,i=0,l=[0];this.slides=this.el.querySelectorAll(".slide");for(var n=0;n<this.slides.length;n++){var r=this.slides[n],s=r.querySelector(".content"),a=s.offsetHeight;e>a?(r.style.height=e+"px",o+=e,i+=e,l.push(i),r.setAttribute("data-top",l[n]),r.setAttribute("data-bottom",l[n]+e)):(r.style.height=a+"px",o+=a,i+=a,l.push(i),r.setAttribute("data-top",l[n]),r.setAttribute("data-bottom",l[n]+a))}this.el.style.height=o+"px",this.getSlide(t,n)},getSlide:function(t,e){var o=getParameterByName("slide"),i=t.location.protocol+"//"+t.location.host+t.location.pathname;if(""!==o)if(e>=o){var l=document.querySelector('.slide[data-count="'+o+'"]'),n=l.getAttribute("data-top");this.el.style.top="-"+n+"px"}else alert("too far!"),this.el.style.top="0px",t.history.replaceState({},"",i+"?slide=1"),o=1;else t.history.replaceState({},"",i+"?slide=1"),o=1;this.scroll(o,t),this.slide(o,e)},scroll:function(t,e){var o=document.querySelector('.slide[data-count="'+t+'"]'),i=parseInt(this.el.style.top),l=parseInt(o.getAttribute("data-bottom"))+i-parseInt(e.innerHeight);e.addEventListener("scroll",function(){e.pageYOffset>=l&&e.scrollTo(0,l)})},slide:function(t,e){{var o,i=this;document.querySelector('.slide[data-count="'+t+'"]')}document.onkeydown=function(l){39==l.keyCode||39==l.which?(o=parseInt(t)+1,dir="r",o>0&&e>o&&(console.log("right"),i.animate(o))):(37==l.keyCode||37==l.which)&&(o=parseInt(t)-1,dir="l",o>0&&e>o&&(console.log("left"),i.animate(o)))}},animate:function(t,e){var o=document.querySelector('.slide[data-count="'+t+'"]'),i=o.getAttribute("data-top");console.log(this.el),this.el.style.top="-"+i+"px"}},document.addEventListener("DOMContentLoaded",function(){new Slider(".slideshow")});
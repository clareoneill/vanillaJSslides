function Slider(t){this.el=document.querySelector(t),this.init()}function getParameterByName(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),o=e.exec(location.search);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))}Slider.prototype={init:function(){var t=window,e=window.innerHeight,o=0,i=0,r=[0];this.slides=this.el.querySelectorAll(".slide");for(var l=0;l<this.slides.length;l++){var s=this.slides[l],a=s.querySelector(".content"),n=a.offsetHeight;e>n?(s.style.height=e+"px",o+=e,i+=e,r.push(i),s.setAttribute("data-top",r[l]),s.setAttribute("data-bottom",r[l]+e)):(s.style.height=n+"px",o+=n,i+=n,r.push(i),s.setAttribute("data-top",r[l]),s.setAttribute("data-bottom",r[l]+n))}this.el.style.height=o+"px",this.getSlide(t,l)},getSlide:function(t,e){var o=getParameterByName("slide"),i=t.location.protocol+"//"+t.location.host+t.location.pathname;if(""!==o)if(e>=o){var r=document.querySelector('.slide[data-count="'+o+'"]'),l=r.getAttribute("data-top");t.scrollTo(0,l)}else alert("too far!"),t.scrollTo(0,0),t.history.replaceState({},"",i+"?slide=1");else t.history.replaceState({},"",i+"?slide=1");this.scroll(o,t)},scroll:function(t,e){var o=document.querySelector('.slide[data-count="'+t+'"]'),i=o.getAttribute("data-top"),r=o.offsetHeight,l=parseInt(i)+parseInt(r)-parseInt(e.innerHeight);e.addEventListener("scroll",function(){e.pageYOffset>l?e.scrollTo(0,l):e.pageYOffset<i&&e.scrollTo(0,i)})}},document.addEventListener("DOMContentLoaded",function(){new Slider(".slideshow")});